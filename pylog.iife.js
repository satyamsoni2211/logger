var pylog=function(e,t,r){"use strict";function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o,i,n=s(t),l=s(r);e.Levels=void 0,(o=e.Levels||(e.Levels={}))[o.not_set=0]="not_set",o[o.debug=1]="debug",o[o.info=2]="info",o[o.warn=3]="warn",o[o.error=4]="error",o[o.critical=5]="critical",function(e){e.not_set="NOT_SET",e.debug="DEBUG",e.info="INFO",e.warn="WARN",e.error="ERROR",e.critical="CRITICAL"}(i||(i={}));class a{event;level;levelNo;extra;context_key;args=[];time;constructor(e,t,r=i.debug,s,o={},n="",l=[]){this.event=e,this.level=r,this.time=s,this.extra=o,this.context_key=n,this.args=l,this.levelNo=t,this.getMessage=this.getMessage.bind(this),this.getTimeInMilliseconds=this.getTimeInMilliseconds.bind(this),this.getIsoFormatTime=this.getIsoFormatTime.bind(this),this.getFormattedTime=this.getFormattedTime.bind(this)}getMessage(){return this.event}getTimeInMilliseconds(){return this.time}getIsoFormatTime(){return n.default.unix(this.time).toISOString()}getFormattedTime(e="YYYY-MM-DD HH:mm:ss ZZ"){return n.default.unix(this.time).format(e)}}const c=()=>n.default().unix();class h{handlers=[];level=0;addHandler(e){this.handlers.push(e)}setLevel(e){this.level=e}createRecord(e,t,r,s,o={}){return new a(e,t,r,s,o)}handle(e){for(const t of this.handlers)t.emit(e)}filter_record(t,r){return t>e.Levels.not_set&&t<=r||t===e.Levels.not_set}info(t,r={}){if(this.filter_record(this.level,e.Levels.info)){const s=this.createRecord(t,e.Levels.info,i.info,c(),r);this.handle(s)}}debug(t,r={}){if(this.filter_record(this.level,e.Levels.debug)){const s=this.createRecord(t,e.Levels.debug,i.debug,c(),r);this.handle(s)}}warn(t,r={}){if(this.filter_record(this.level,e.Levels.warn)){const s=this.createRecord(t,e.Levels.warn,i.warn,c(),r);this.handle(s)}}error(t,r={}){if(this.filter_record(this.level,e.Levels.error)){const s=this.createRecord(t,e.Levels.error,i.error,c(),r);this.handle(s)}}critical(t,r={}){if(this.filter_record(this.level,e.Levels.critical)){const s=this.createRecord(t,e.Levels.critical,i.critical,c(),r);this.handle(s)}}}class d{formatter;level;constructor(){this.level=1}setFormatter(e){this.formatter=e}setLevel(e){this.level=e}filter(e){return this.level<=e}}class f{format(e){return this.formatRecord(e)}}class u extends d{getConsoleMethod(e){let t;switch(e.toLowerCase()){case"debug":t=console.debug;break;case"info":t=console.info;break;case"warn":t=console.warn;break;case"critical":case"error":t=console.error;break;default:t=console.log}return t}emit(e){if(this.filter(e.levelNo)){const t=this.formatter.format(e);this.getConsoleMethod(e.level).call(this,t)}}}var g=Object.freeze({__proto__:null,ConsoleHandler:u,StreamHandler:class extends d{endpoint;constructor(e){super(),this.endpoint=e.endpoint}postToSumo(e){l.default.post(this.endpoint,e,{headers:{"Content-Type":"application/json"}}).then((e=>{console.log(e.data)}))}emit(e){const t=this.formatter.format(e);this.postToSumo(t)}}});class m extends f{formatRecord(e){return`[${e.level}] ${e.getIsoFormatTime()} ${e.getMessage()}`.replace(/\$\{(\S+)\}/g,(function(t){let r=t.slice(2,t.length-1);return e.extra[r]||t}))}}var v=Object.freeze({__proto__:null,BasicFormatter:m,JSONFormatter:class extends f{isError(e){return e instanceof Error}getStack(e){const t=e.getMessage();if(this.isError(t))return t.stack}interpolateRecord(e,t){return e.replace(/\$\{(\S+)\}/g,(function(e){let r=e.slice(2,e.length-1);return t[r]||e}))}formatMessage(e){const t=e.getMessage();let r;return r=t instanceof Error?`${t.message}`:this.interpolateRecord(t,e.extra),r}formatRecord(e){const t={message:this.formatMessage(e),timestamp:e.getIsoFormatTime(),level:e.level,context:e.extra,user:e.extra?.user};return this.isError(e.getMessage())&&(t.stack_info=this.getStack(e)),JSON.stringify(t)}}});var _=Object.freeze({__proto__:null,get_basic_logger:function(){const e=new h,t=new u,r=new m;return t.setFormatter(r),e.addHandler(t),e},get_custom_logger:function(e){const{handlers:t=[new u],level:r=1,formatter:s=new m}=e,o=new h;return t.forEach((e=>{e.setLevel(r),e.setFormatter(s),o.addHandler(e)})),o}});return e.Logger=h,e.formatters=v,e.handlers=g,e.utils=_,Object.defineProperty(e,"__esModule",{value:!0}),e}({},moment,axios);
